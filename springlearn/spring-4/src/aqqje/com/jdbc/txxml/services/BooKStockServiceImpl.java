/** * Copyright (c), 2018-2018, XXX有限公司 * FileName: BooKStockServiceImpl * Author:   Administrator * Date:     2018/5/1119:00 * Description: * History: * <author>    <time>    <version>    <desc> * 作者姓名     修改时间      版本号       描述 */package aqqje.com.jdbc.txxml.services;import aqqje.com.jdbc.txxml.beans.dao.BookShopDao;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;public class BooKStockServiceImpl implements BookStockService {    private BookShopDao bookShopDao;    public void setBookShopDao(BookShopDao bookShopDao) {        this.bookShopDao = bookShopDao;    }    // 添加事件注解    @Transactional    @Override    public void purchase(String username, Integer isbn) {        // 查询书号 isbn 的单价        double price = bookShopDao.findPriceByisbn(isbn);        // 库存 - 1        bookShopDao.updataStock(isbn);        // 用户余额更新        bookShopDao.updataBalance(username, price);    }}